"0","base_brevets <- base_brevets %>%"
"0","  mutate("
"0","    # Séparer les codes IPC et descriptions en listes"
"0","    ipc_main_code_list = str_split(ipc_main_code, "",\\s*""), # Liste des codes"
"0","    ipc_main_desc_list = str_split(ipc_main_desc, "",\\s*""), # Liste des descriptions"
"0",""
"0","    # Garder le premier code et sa description dans ipc_main_code et ipc_main_desc"
"0","    ipc_main_code = sapply(ipc_main_code_list, function(x) x[1]),"
"0","    ipc_main_desc = sapply(ipc_main_desc_list, function(x) x[1]),"
"0",""
"0","    # Remplir ipc_second_code et ipc_second_desc si NA, à partir des deuxièmes éléments"
"0","    ipc_second_code = ifelse("
"0","      is.na(ipc_second_code) | ipc_second_code == """","
"0","      sapply(ipc_main_code_list, function(x) if (length(x) > 1) x[2] else NA),"
"0","      ipc_second_code"
"0","    ),"
"0","    ipc_second_desc = ifelse("
"0","      is.na(ipc_second_code) | ipc_second_code == """","
"0","      NA, # Si ipc_second_code est NA, mettre ipc_second_desc à NA"
"0","      ifelse("
"0","        is.na(ipc_second_desc) | ipc_second_desc == """","
"0","        sapply(ipc_main_desc_list, function(x) if (length(x) > 1) x[2] else NA),"
"0","        ipc_second_desc"
"0","      )"
"0","    )"
"0","  ) %>%"
"0","  select(-ipc_main_code_list, -ipc_main_desc_list) # Supprimer les colonnes temporaires"
"0",""
